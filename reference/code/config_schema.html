
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Docs for B4 backup">
      
      
      
      
        <link rel="prev" href="../../configuration.html">
      
      
        <link rel="next" href="exceptions.html">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Config schema - B4, Btrfs Backups But Better</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/code_select.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#b4_backup.config_schema" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="B4, Btrfs Backups But Better" class="md-header__button md-logo" aria-label="B4, Btrfs Backups But Better" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 20q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48 1.18-1.53 3.08-1.95.58-2.02 2.14-3.4Q8.95 4.38 11 4.08v8.07L9.4 10.6 8 12l4 4 4-4-1.4-1.4-1.6 1.55V4.08q2.58.35 4.29 2.31T19 11q1.73.2 2.86 1.5 1.14 1.28 1.14 3 0 1.88-1.31 3.19T18.5 20Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            B4, Btrfs Backups But Better
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Config schema
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/denialofsandwich/b4-backup" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </div>
  <div class="md-source__repository">
    b4_backup
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="B4, Btrfs Backups But Better" class="md-nav__button md-logo" aria-label="B4, Btrfs Backups But Better" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 20q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48 1.18-1.53 3.08-1.95.58-2.02 2.14-3.4Q8.95 4.38 11 4.08v8.07L9.4 10.6 8 12l4 4 4-4-1.4-1.4-1.6 1.55V4.08q2.58.35 4.29 2.31T19 11q1.73.2 2.86 1.5 1.14 1.28 1.14 3 0 1.88-1.31 3.19T18.5 20Z"/></svg>

    </a>
    B4, Btrfs Backups But Better
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/denialofsandwich/b4-backup" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </div>
  <div class="md-source__repository">
    b4_backup
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intro
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../terminology.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terminology
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contribute
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" checked>
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Code reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Code reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Config schema
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="config_schema.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Config schema
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.BackupTarget" class="md-nav__link">
    <span class="md-ellipsis">
      BackupTarget
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.BaseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      BaseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#b4_backup.config_schema.BaseConfig.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.OnDestinationDirNotFound" class="md-nav__link">
    <span class="md-ellipsis">
      OnDestinationDirNotFound
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.SubvolumeBackupStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      SubvolumeBackupStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.SubvolumeFallbackStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      SubvolumeFallbackStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.TargetRestoreStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      TargetRestoreStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.TargetSubvolume" class="md-nav__link">
    <span class="md-ellipsis">
      TargetSubvolume
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="exceptions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="utils.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_4" >
        
          
          <label class="md-nav__link" for="__nav_6_3_4" id="__nav_6_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Main
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_4">
            <span class="md-nav__icon md-icon"></span>
            Main
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="main/b4_backup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    B4 backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="main/backup_target_host.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup target host
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="main/connection.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="main/dataclass.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dataclass
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.BackupTarget" class="md-nav__link">
    <span class="md-ellipsis">
      BackupTarget
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.BaseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      BaseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#b4_backup.config_schema.BaseConfig.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.OnDestinationDirNotFound" class="md-nav__link">
    <span class="md-ellipsis">
      OnDestinationDirNotFound
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.SubvolumeBackupStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      SubvolumeBackupStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.SubvolumeFallbackStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      SubvolumeFallbackStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.TargetRestoreStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      TargetRestoreStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#b4_backup.config_schema.TargetSubvolume" class="md-nav__link">
    <span class="md-ellipsis">
      TargetSubvolume
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/denialofsandwich/b4-backup/edit/main/docs/reference/code/config_schema.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>
    </a>
  
  


  <h1>Config schema</h1>

<div class="doc doc-object doc-module">



<a id="b4_backup.config_schema"></a>
    <div class="doc doc-contents first">

        <p>This module contains the config structure and it's default values.</p>
<p>The config is using the YAML syntax and this file describes the structure of it.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="b4_backup.config_schema.BackupTarget" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">BackupTarget</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#b4_backup.config_schema.BackupTarget" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">BackupTarget</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">source</span><span class="o">=</span><span class="n">II</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.source&quot;</span><span class="p">),</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">destination</span><span class="o">=</span><span class="n">II</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.destination&quot;</span><span class="p">),</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">if_dst_dir_not_found</span><span class="o">=</span><span class="n">II</span><span class="p">(</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>        <span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.if_dst_dir_not_found&quot;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="p">),</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">restore_strategy</span><span class="o">=</span><span class="n">II</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.restore_strategy&quot;</span><span class="p">),</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">src_snapshot_dir</span><span class="o">=</span><span class="n">II</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.src_snapshot_dir&quot;</span><span class="p">),</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">src_retention</span><span class="o">=</span><span class="nb">dict</span><span class="p">(),</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n">dst_retention</span><span class="o">=</span><span class="nb">dict</span><span class="p">(),</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    <span class="n">replaced_target_ttl</span><span class="o">=</span><span class="n">II</span><span class="p">(</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>        <span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.replaced_target_ttl&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="p">),</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">subvolume_rules</span><span class="o">=</span><span class="n">II</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.subvolume_rules&quot;</span><span class="p">),</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Defines a single backup target.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path or URL you want to backup. Needs to be a btrfs subvolume</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(f&#39;..{<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>}.source&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>destination</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path or URL where you want to send snapshots. If None, snapshots will only be on source side</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(f&#39;..{<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>}.destination&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restore_strategy</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TargetRestoreStrategy (b4_backup.config_schema.TargetRestoreStrategy)" href="#b4_backup.config_schema.TargetRestoreStrategy">TargetRestoreStrategy</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default procedure to restore a backup</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(f&#39;..{<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>}.restore_strategy&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_snapshot_dir</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Directory where source snapshots relative to the mount point of the btrfs volume are located</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(f&#39;..{<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>}.src_snapshot_dir&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_retention</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Retention rules for snapshots located at the source</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dst_retention</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Retention rules for snapshots located at the destination</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>replaced_target_ttl</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The minimum time the old replaced subvolume should be kept</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(f&#39;..{<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>}.replaced_target_ttl&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>subvolume_rules</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-internal" title="TargetSubvolume


  
      dataclass
   (b4_backup.config_schema.TargetSubvolume)" href="#b4_backup.config_schema.TargetSubvolume">TargetSubvolume</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Contains rules for how to handle the subvolumes of a target</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(f&#39;..{<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>}.subvolume_rules&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="b4_backup.config_schema.BaseConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">BaseConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#b4_backup.config_schema.BaseConfig" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">BaseConfig</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">backup_targets</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>        <span class="n">DEFAULT</span><span class="p">:</span> <span class="n">BackupTarget</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>            <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>            <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>            <span class="n">if_dst_dir_not_found</span><span class="o">=</span><span class="n">OnDestinationDirNotFound</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>            <span class="n">restore_strategy</span><span class="o">=</span><span class="n">TargetRestoreStrategy</span><span class="o">.</span><span class="n">SAFE</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">src_snapshot_dir</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.b4_backup&quot;</span><span class="p">),</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">src_retention</span><span class="o">=</span><span class="p">{</span><span class="n">DEFAULT</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">}},</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">dst_retention</span><span class="o">=</span><span class="p">{</span><span class="n">DEFAULT</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="s2">&quot;forever&quot;</span><span class="p">}},</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">replaced_target_ttl</span><span class="o">=</span><span class="s2">&quot;24hours&quot;</span><span class="p">,</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">subvolume_rules</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>                <span class="n">DEFAULT</span><span class="p">:</span> <span class="n">TargetSubvolume</span><span class="p">(</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>                    <span class="n">backup_strategy</span><span class="o">=</span><span class="n">SubvolumeBackupStrategy</span><span class="o">.</span><span class="n">FULL</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>                    <span class="n">fallback_strategy</span><span class="o">=</span><span class="n">SubvolumeFallbackStrategy</span><span class="o">.</span><span class="n">DROP</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>                <span class="p">),</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>                <span class="s2">&quot;/&quot;</span><span class="p">:</span> <span class="n">TargetSubvolume</span><span class="p">(),</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>            <span class="p">},</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>        <span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="p">}(),</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    <span class="n">default_targets</span><span class="o">=</span><span class="nb">list</span><span class="p">(),</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="n">timezone</span><span class="o">=</span><span class="s2">&quot;utc&quot;</span><span class="p">,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    <span class="n">logging</span><span class="o">=</span><span class="n">II</span><span class="p">(</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>        <span class="s2">&quot;oc.create:${from_file:&quot;</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>            <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>            <span class="o">/</span> <span class="s2">&quot;default_logging_config.yml&quot;</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>        <span class="p">)</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>        <span class="o">+</span> <span class="s2">&quot;}&quot;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>    <span class="p">),</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>    <span class="n">config_path</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;~/.config/b4_backup.yml&quot;</span><span class="p">),</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>The root level of the configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>backup_targets</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-internal" title="BackupTarget


  
      dataclass
   (b4_backup.config_schema.BackupTarget)" href="#b4_backup.config_schema.BackupTarget">BackupTarget</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An object containing all targets to backup</p>
              </div>
            </td>
            <td>
                  <code>lambda: {<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>: <a class="autorefs autorefs-internal" title="BackupTarget


  
      dataclass
   (b4_backup.config_schema.BackupTarget)" href="#b4_backup.config_schema.BackupTarget">BackupTarget</a>(source=None, destination=None, if_dst_dir_not_found=<span title="b4_backup.config_schema.OnDestinationDirNotFound.CREATE">CREATE</span>, restore_strategy=<span title="b4_backup.config_schema.TargetRestoreStrategy.SAFE">SAFE</span>, src_snapshot_dir=<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>(&#39;.b4_backup&#39;), src_retention={<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>: {&#39;all&#39;: &#39;1&#39;}}, dst_retention={<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>: {&#39;all&#39;: &#39;forever&#39;}}, replaced_target_ttl=&#39;24hours&#39;, subvolume_rules={<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>: <a class="autorefs autorefs-internal" title="TargetSubvolume


  
      dataclass
   (b4_backup.config_schema.TargetSubvolume)" href="#b4_backup.config_schema.TargetSubvolume">TargetSubvolume</a>(backup_strategy=<span title="b4_backup.config_schema.SubvolumeBackupStrategy.FULL">FULL</span>, fallback_strategy=<span title="b4_backup.config_schema.SubvolumeFallbackStrategy.DROP">DROP</span>), &#39;/&#39;: <a class="autorefs autorefs-internal" title="TargetSubvolume


  
      dataclass
   (b4_backup.config_schema.TargetSubvolume)" href="#b4_backup.config_schema.TargetSubvolume">TargetSubvolume</a>()})}()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_targets</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of default targets to use if not specified</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timezone</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timezone to use</p>
              </div>
            </td>
            <td>
                  <code>&#39;utc&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logging</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Python logging configuration settings (logging.config.dictConfig).</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(&#39;oc.create:${from_file:&#39; + <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>(<span title="parent">parent</span> / &#39;default_logging_config.yml&#39;) + &#39;}&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>










  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="b4_backup.config_schema.BaseConfig.__post_init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__post_init__</span>


<a href="#b4_backup.config_schema.BaseConfig.__post_init__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">__post_init__</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Used for validation of the values.</p>


            <details class="quote">
              <summary>Source code in <code>b4_backup/config_schema.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Used for validation of the values.&quot;&quot;&quot;</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>    <span class="n">options</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backup_targets</span><span class="p">)</span> <span class="o">-</span> <span class="p">{</span><span class="n">DEFAULT</span><span class="p">}</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>    <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_targets</span><span class="p">:</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">PurePath</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">is_relative_to</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">options</span><span class="p">):</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>            <span class="k">raise</span> <span class="n">omegaconf</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>                <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>                    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="s2">                    Item &#39;</span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">&#39; is not in &#39;backup_targets&#39; but defined in &#39;default_targets&#39;</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="s2">                        full_key: default_targets</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="s2">                        object_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>                <span class="p">)</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="b4_backup.config_schema.OnDestinationDirNotFound" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">OnDestinationDirNotFound</span>


<a href="#b4_backup.config_schema.OnDestinationDirNotFound" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, <code><a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>


        <p>How to behave, if the destination directory does not exist.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.OnDestinationDirNotFound.CREATE">CREATE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Create the missing directory structure and proceed without an error.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.OnDestinationDirNotFound.FAIL">FAIL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Throw an error and stop execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="b4_backup.config_schema.SubvolumeBackupStrategy" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">SubvolumeBackupStrategy</span>


<a href="#b4_backup.config_schema.SubvolumeBackupStrategy" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, <code><a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>


        <p>Backup strategy for subvolumes.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.SubvolumeBackupStrategy.IGNORE">IGNORE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The subvolume will be ignored during the backup</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.SubvolumeBackupStrategy.SOURCE_ONLY">SOURCE_ONLY</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The subvolume will be kept only on source and not sent to destination</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.SubvolumeBackupStrategy.FULL">FULL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The subvolume will be sent to destination</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="b4_backup.config_schema.SubvolumeFallbackStrategy" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">SubvolumeFallbackStrategy</span>


<a href="#b4_backup.config_schema.SubvolumeFallbackStrategy" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, <code><a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>


        <p>Fallback strategy for subvolumes on a restore if the backup subvolume is already deleted.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.SubvolumeFallbackStrategy.DROP">DROP</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The subvolume is lost after a restore (Use case: Docker artifacts or everywhere else where btrfs subvolumes are created dynamically)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.SubvolumeFallbackStrategy.NEW">NEW</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An empty subvolume is created at that place (Use case: Cache directories)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.SubvolumeFallbackStrategy.KEEP">KEEP</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The old subvolume will be copied at the new place, if doesn't exist, a new one will be created (Use case: Steam library)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="b4_backup.config_schema.TargetRestoreStrategy" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TargetRestoreStrategy</span>


<a href="#b4_backup.config_schema.TargetRestoreStrategy" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, <code><a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>


        <p>Specifies the restore procedure to be used.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.TargetRestoreStrategy.SAFE">SAFE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Just copy the snapshot back to the source snapshot directory without touching the target directory</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="b4_backup.config_schema.TargetRestoreStrategy.REPLACE">REPLACE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Bases safe, but also replace the target subvolumes with the copied one. Works by moving the original target away and then copy the snapshot to that place. Revertable by using the REPLACE snapshot name.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="b4_backup.config_schema.TargetSubvolume" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TargetSubvolume</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#b4_backup.config_schema.TargetSubvolume" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">TargetSubvolume</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">backup_strategy</span><span class="o">=</span><span class="n">II</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.backup_strategy&quot;</span><span class="p">),</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">fallback_strategy</span><span class="o">=</span><span class="n">II</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;..</span><span class="si">{</span><span class="n">DEFAULT</span><span class="si">}</span><span class="s2">.fallback_strategy&quot;</span><span class="p">),</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Defines how to handle a specific subvolume in a target.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>backup_strategy</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SubvolumeBackupStrategy (b4_backup.config_schema.SubvolumeBackupStrategy)" href="#b4_backup.config_schema.SubvolumeBackupStrategy">SubvolumeBackupStrategy</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How to handle the subvolume during backup</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(f&#39;..{<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>}.backup_strategy&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fallback_strategy</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SubvolumeFallbackStrategy (b4_backup.config_schema.SubvolumeFallbackStrategy)" href="#b4_backup.config_schema.SubvolumeFallbackStrategy">SubvolumeFallbackStrategy</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How to handle the subvolume during restore if the backup subvolume is already deleted</p>
              </div>
            </td>
            <td>
                  <code><span title="omegaconf.II">II</span>(f&#39;..{<span title="b4_backup.config_schema.DEFAULT">DEFAULT</span>}.fallback_strategy&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>










  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.top", "content.code.copy", "content.code.annotate", "content.action.edit", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>